<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0f0f14">
    <meta name="color-scheme" content="dark light">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <title>ToneMatch Prototype</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/app.css">
</head>
<body>
    <div class="app">
        <header class="top-bar">
            <div>
                <p class="eyebrow">ToneMatch Â· Prototype</p>
                <h1>Skin tone + palette matcher</h1>
            </div>
            <div class="status-pill" id="privacyBadge">On-device processing</div>
        </header>

        <main class="screen-container">
            <section class="screen active" id="screen-onboarding" aria-labelledby="onboarding-title">
                <div class="screen-header">
                    <h2 id="onboarding-title">Start with a clean selfie</h2>
                    <p>We only analyze skin tone and undertone. No identity inference. Images stay on-device unless you explicitly opt in to upload.</p>
                </div>
                <div class="card">
                    <h3>Photo checklist</h3>
                    <ul class="checklist">
                        <li>No makeup and no filter</li>
                        <li>Face centered, neutral expression</li>
                        <li>Indirect daylight, even lighting</li>
                        <li>Plain background, no strong shadows</li>
                    </ul>
                    <div class="actions">
                        <button class="primary" data-nav="capture">Take a selfie</button>
                        <button class="ghost" data-nav="capture">Upload a photo</button>
                    </div>
                </div>
                <div class="callout">
                    <strong>Transparency promise:</strong> You will see confidence scores and can adjust the result manually.
                </div>
            </section>

            <section class="screen" id="screen-capture" aria-labelledby="capture-title">
                <div class="screen-header">
                    <h2 id="capture-title">Capture a selfie</h2>
                    <p>We run quick quality checks for lighting, blur, and face size. If something looks off, we will suggest a retake.</p>
                </div>
                <div class="capture-grid">
                    <div class="capture-card">
                        <div class="capture-preview">
                            <video id="cameraPreview" autoplay playsinline muted></video>
                            <canvas id="captureCanvas" aria-hidden="true"></canvas>
                            <img id="photoPreview" alt="Selfie preview" />
                        </div>
                        <div class="actions">
                            <button class="secondary" id="startCamera">Use camera</button>
                            <button class="secondary" id="takePhoto">Capture</button>
                            <label class="file-button">
                                Upload
                                <input type="file" id="photoInput" accept="image/*" />
                            </label>
                        </div>
                    </div>
                    <div class="capture-card">
                        <h3>Quality checks</h3>
                        <ul class="status-list" id="qualityList"></ul>
                        <div class="actions">
                            <button class="primary" id="analyzeButton">Analyze tone</button>
                            <button class="ghost" data-nav="onboarding">Back</button>
                        </div>
                        <p class="small-text" id="qualityTip"></p>
                    </div>
                </div>
            </section>

            <section class="screen" id="screen-results" aria-labelledby="results-title">
                <div class="screen-header">
                    <h2 id="results-title">Your results</h2>
                    <p id="resultsSummary">Your photo suggests a balanced undertone with medium depth.</p>
                </div>
                <div class="results-grid">
                    <div class="card">
                        <h3>Skin tone</h3>
                        <div class="metric">
                            <span>Tone depth</span>
                            <strong id="toneDepthValue">--</strong>
                        </div>
                        <div class="metric">
                            <span>Undertone</span>
                            <strong id="undertoneValue">--</strong>
                        </div>
                        <div class="metric">
                            <span>Confidence</span>
                            <strong id="confidenceValue">--</strong>
                        </div>
                        <div class="actions">
                            <button class="secondary" data-nav="adjust">Adjust result</button>
                            <button class="ghost" data-nav="capture">Retake photo</button>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Palette preview</h3>
                        <div class="swatch-grid" id="swatchGrid"></div>
                        <button class="ghost" data-nav="palette">See palette detail</button>
                    </div>
                </div>
                <div class="actions spread">
                    <button class="primary" data-nav="trending">See trending looks</button>
                    <button class="secondary" data-nav="stencil">Try stencil overlay</button>
                </div>
            </section>

            <section class="screen" id="screen-adjust" aria-labelledby="adjust-title">
                <div class="screen-header">
                    <h2 id="adjust-title">Adjust your result</h2>
                    <p>Fine-tune undertone and depth if you feel the estimate is off. Palette updates immediately.</p>
                </div>
                <div class="card">
                    <label class="field-label">Undertone</label>
                    <div class="pill-group" id="undertoneOptions">
                        <button data-undertone="cool">Cool</button>
                        <button data-undertone="warm">Warm</button>
                        <button data-undertone="neutral">Neutral</button>
                        <button data-undertone="olive">Olive</button>
                    </div>
                    <label class="field-label">Depth</label>
                    <input type="range" id="depthSlider" min="0" max="100" step="1" />
                    <div class="small-text" id="depthLabel"></div>
                </div>
                <div class="card">
                    <h3>Updated palette</h3>
                    <div class="swatch-grid" id="adjustSwatches"></div>
                </div>
                <div class="actions">
                    <button class="primary" data-nav="results">Save updates</button>
                    <button class="ghost" data-nav="results">Cancel</button>
                </div>
            </section>

            <section class="screen" id="screen-palette" aria-labelledby="palette-title">
                <div class="screen-header">
                    <h2 id="palette-title">Palette detail</h2>
                    <p>Suggested clothing colors and makeup families tuned to your depth and undertone.</p>
                </div>
                <div class="palette-columns">
                    <div class="card">
                        <h3>Clothing colors</h3>
                        <div id="clothingGroups"></div>
                    </div>
                    <div class="card">
                        <h3>Makeup families</h3>
                        <div id="makeupFamilies"></div>
                    </div>
                </div>
                <button class="ghost" data-nav="results">Back to results</button>
            </section>

            <section class="screen" id="screen-trending" aria-labelledby="trending-title">
                <div class="screen-header">
                    <h2 id="trending-title">Trending looks for your palette</h2>
                    <p>Curated looks tagged by undertone, depth, season, and vibe.</p>
                </div>
                <div id="looksGrid" class="looks-grid"></div>
                <button class="ghost" data-nav="results">Back to results</button>
            </section>

            <section class="screen" id="screen-stencil" aria-labelledby="stencil-title">
                <div class="screen-header">
                    <h2 id="stencil-title">Stencil overlay</h2>
                    <p>Guided placement for blush, contour, eyes, and lips. Use as a reference, not a strict template.</p>
                </div>
                <div class="stencil-wrapper">
                    <div class="stencil-canvas">
                        <img id="stencilPhoto" alt="Stencil base photo" />
                        <svg id="stencilOverlay" viewBox="0 0 400 500" aria-hidden="true"></svg>
                    </div>
                    <div class="card">
                        <h3>Overlay layers</h3>
                        <div class="toggle-list">
                            <label><input type="checkbox" data-layer="brows" checked> Brows</label>
                            <label><input type="checkbox" data-layer="eyes" checked> Eyes</label>
                            <label><input type="checkbox" data-layer="blush" checked> Blush</label>
                            <label><input type="checkbox" data-layer="contour" checked> Contour</label>
                            <label><input type="checkbox" data-layer="lips" checked> Lips</label>
                        </div>
                        <label class="field-label">Opacity</label>
                        <input type="range" id="overlayOpacity" min="0.2" max="0.9" step="0.05" value="0.6" />
                        <div class="actions">
                            <button class="primary" data-nav="capture">Use a new photo</button>
                            <button class="ghost" data-nav="results">Back</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script type="module" src="scripts/app.js"></script>
</body>
</html>
